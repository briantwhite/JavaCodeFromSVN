6/7/13
new -> Google -> Web Application Project
nuke server stuff
moving code from Jean-Michel Claus' gwt-ification of Genex
got it from https://github.com/MITx/Blades/tree/master/genex
only have src/
	drag in files to client/
	also put content of Genex.gwt.xml into JsGenex.gwt.xml
	content of public/genex.css to war/JsGenex.css
	put images/ in war/
had to fix package
nuked DocumentRenderer

coundn't find server class
edited web.xml to remove that reference

can get it to build but it makes war/genex folder
	not war/jsgenex folder
	why?
	- line in JsGenex.gwt.xml: <module rename-to
	
how to run it?
look in mitx_all/mitx/common/static/js/capa
	find some stuff on genex
	especially edit-a-gene.js
		put it in war
		add reference to JsGenex.html
		
it couldn't find "$wnd"
need to add jquery
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
to JsGenex.html

now visible
but can't respond to key strokes

6/10/13
test posting - again

maybe key stroke thing is because we didn't register the callbacks

trying on home mac, but now it can't find
Unable to find 'edu/umb/bio/genex/JsGenex.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
this is because it's edu/umb/bio/jsGenex/JsGenex.gwt.xml
where is the reference?
in Run As -> Run Configurations -> arguments 
	program arguments contained edu.bio.umb.genex.JsGenex in addition to the correct one edu.umb.bio.jsGenex.JsGenex
	deleted wrong one and it seems to work
	
weird errors with jQuery stuff
added jquery-1.10.1.min.js to war/
edited JsGenex.html to use this one
didn't help
error is in GenexGWT.java notifyHostpage()
	expects int, gets undefined
	probably because the reference to $wnd is no good

maybe not - you need to have fields with genex_dna_sequence and genex_problem_number
found them in mitx/common/lib/capa/capa/templates/editageneinput.html

still seeing the JS type errors in notifyHostpage();
	getting string when expecting int
also: notifyHostpage(){[]} JSON.parse: unexpected character
	perhaps they're related
probably a problem in edit-a-gene.js
	it's looking for a missing field - maybe ingenexGetInputField - looking for .problem

can run it in chrome if you start chrome with open -a Google\ Chrome --args --disable-web-security

6/11/13
using chrome and the edx site and the js console
did window.genexGetInputField() and it gave back:
[
<input type=​"hidden" name=​"input_i4x-MITx-7_00x-problem-PSet4_graded_P4_Q5a_2_2_1" id=​"input_i4x-MITx-7_00x-problem-PSet4_graded_P4_Q5a_2_2_1" value=​"{"genex_dna_sequence":​"AGCCT","genex_answer":​"INCORRECT"}​">​,
<input type=​"hidden" name=​"problem_id" value=​"{"genex_dna_sequence":​"AGCCT","genex_answer":​"INCORRECT"}​">​
]
try putting these in JsGenex.html

same errors and window.genexGetInputField() gives []
what is ".parent"?
go into edx page and look for window.$('#genex_container').parents('.problem')
	and it finds a <section class="problem>
					</section>
			wrapping the genex prob
	try adding that.
	NG
but - the quotes are somehow messed up - if you do window.genexGetInputField()
	there are weird extra blue quotes...
there are characters <U+200B> - "zero width space"
see them in TextWrngler by view -> text display -> show invisibles
removed them
	still NG
had to make internal quotes be single quotes
	at least now, the color coding of the result of window.genexGetInputField() in chrome
		matches the 7.00x mooc version
	but still has errors
	
also - can't click on bases until you've entered a new DNA sequence...

e-mailed JMC and he said
	genexGetInputField is the one causing the problem. It looks for that hidden 
	field whose value is the saved state that can be graded by the Python backend.

	So, just add third hidden input field and give it a name. Then do not use 
	genexGetInputField that looks for the <input type="hidden" name="input_${id}" 
	id="input_${id}" value="${value|h}"/> in the template.

if you delete the $wnd.genexIsReady(); from GenexGWT.notifyHostpage() you don't get that error
so it's in the genexIsReady()
no errors if you comment out the whole genexIsReady() function (but no genex shows up either)

break it down:

if only comment out:
        if (genex_saved_state === '') {
            //Load DNA sequence from xml file 
            genex_dna_sequence = genex_default_dna_sequence;
        }
        else {
            //Load DNA sequence from saved value
            genex_saved_state = JSON.parse(genex_saved_state);
            genex_dna_sequence = genex_saved_state.genex_dna_sequence;
        }
still get errors

comment all but last part below         //Now load mouse and keyboard handlers
	different errors
	
found 2 problems
	- the string found when expecting int comes from 
		var genex_problem_number = $('#genex_problem_number').val();
		- try fixing by taking quote out of JsGenex.html value="1"
			NG, try parseInt()
			OK!
			
	- the unexpected ' token is from
		    genex_saved_state = JSON.parse(genex_saved_state);
            genex_dna_sequence = genex_saved_state.genex_dna_sequence;
 		- try switching quotes to value='{"genexblabla":"fred"}'
 
 NOW FULLY AOK!
		
	