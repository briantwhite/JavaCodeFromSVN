5/7/08
started over

5/8/08
got CharacterSpecBank to output all possible character-trait combos

5/19/08
got recombination working

parents:
Genetic Model: XX/XY sex linkage
Autosome:
Two Allele Simple Dominance; Eye:Color:Brown is recessive, Eye:Color:Purple is dominant.
recombination frequency = 0.1 to:
Two Allele Simple Dominance; Antenna:Shape:Pointy is recessive, Antenna:Shape:Short is dominant.
*******
Sex Chromosome:
*******
$$$$$$$$

mom:
Organism: [female]
Genotype:
Maternal auto:
Brown-Eye;Pointy-Antenna
Paternal auto:
Purple-Eye;Short-Antenna
Maternal sex chr:

Paternal sex chr:

Phenotypes:
Eye:Color:Purple
Antenna:Shape:Short
pheno string=Purple-Eye/Short-Antenna
**organism**

dad:
Organism: [male]
Genotype:
Maternal auto:
Brown-Eye;Pointy-Antenna
Paternal auto:
Brown-Eye;Pointy-Antenna
Maternal sex chr:

Paternal sex chr:
null sex chromosome
Phenotypes:
Eye:Color:Brown
Antenna:Shape:Pointy
pheno string=Brown-Eye/Pointy-Antenna
**organism**

100 offspring

Purple-Eye/Pointy-Antenna: 5, 5 males, 0 females
Purple-Eye/Short-Antenna: 45, 25 males, 20 females
Brown-Eye/Short-Antenna: 12, 5 males, 7 females
Brown-Eye/Pointy-Antenna: 42, 12 males, 30 females

this gives rf = (12 + 5)/100 = 17% 
real rf = 10% this is pretty close!

another try
1000 offspring
Genetic Model: XX/XY sex linkage
Autosome:
Two Allele Simple Dominance; Antenna:Shape:Knobbed is recessive, Antenna:Shape:Bent is dominant.
recombination frequency = 0.1 to:
Two Allele Simple Dominance; Antenna:Color:Red is recessive, Antenna:Color:Green is dominant.
*******
Sex Chromosome:
*******
$$$$$$$$

mom:
Organism: [female]
Genotype:
Maternal auto:
Knobbed-Antenna;Green-Antenna
Paternal auto:
Bent-Antenna;Red-Antenna
Maternal sex chr:

Paternal sex chr:

Phenotypes:
Antenna:Shape:Bent
Antenna:Color:Green
pheno string=Bent-Antenna/Green-Antenna
**organism**

dad:
Organism: [male]
Genotype:
Maternal auto:
Knobbed-Antenna;Red-Antenna
Paternal auto:
Knobbed-Antenna;Red-Antenna
Maternal sex chr:
null sex chromosome
Paternal sex chr:

Phenotypes:
Antenna:Shape:Knobbed
Antenna:Color:Red
pheno string=Knobbed-Antenna/Red-Antenna
**organism**

kids:

results:
Bent-Antenna/Red-Antenna: 468, 280 males, 188 females
Knobbed-Antenna/Green-Antenna: 440, 198 males, 242 females
Bent-Antenna/Green-Antenna: 53, 29 males, 24 females
Knobbed-Antenna/Red-Antenna: 43, 15 males, 28 females

gives rf = (53 + 43)/1000 = 9.6% 
looks like it works

do a 3-point cross
blue short brown/yel long black
10% rf between each

NR
Blue-Eye/Short-Antenna/Brown-Body: 385, 281 males, 104 females
Yellow-Eye/Long-Antenna/Black-Body: 404, 114 males, 290 females

single at 1st
Blue-Eye/Long-Antenna/Black-Body: 54, 29 males, 25 females
Yellow-Eye/Short-Antenna/Brown-Body: 60, 25 males, 35 females

single at 2nd
Blue-Eye/Short-Antenna/Black-Body: 43, 32 males, 11 females
Yellow-Eye/Long-Antenna/Brown-Body: 49, 19 males, 30 females

doubles
Blue-Eye/Long-Antenna/Brown-Body: 6, 4 males, 2 females
Yellow-Eye/Short-Antenna/Black-Body: 7, 2 males, 5 females

looks OK
the doubles are the least freq

rf1 (should be 10%) is (54 + 60 + 6 + 7)/1000 = 12.7%
rf2 (should be 10%) is (43 + 49 + 6 + 7)/1000 = 10.5%
 doubles should be 1% is 13/1000 = 1.3%
 
looks OK
but what if rf1 is usually higher than rf2?
try again

bent yel brn/norm pur yel
10% b/w each
1000 offspring

NR
Bent-Body/Yellow-Body/Brown-Leg: 407, 278 males, 129 females
Normal-Body/Purple-Body/Yellow-Leg: 410, 125 males, 285 females

single at 1st
Bent-Body/Purple-Body/Yellow-Leg: 50, 33 males, 17 females
Normal-Body/Yellow-Body/Brown-Leg: 37, 10 males, 27 females

single at 2nd
Bent-Body/Yellow-Body/Yellow-Leg: 47, 34 males, 13 females
Normal-Body/Purple-Body/Brown-Leg: 44, 6 males, 38 females

doubles
Bent-Body/Purple-Body/Brown-Leg: 8, 5 males, 3 females
Normal-Body/Yellow-Body/Yellow-Leg: 5, 1 males, 4 females

again looks OK

rf1 (10%) = (50 + 37 + 8 + 5)/1000 = 10.0%
rf2 (10%) = (47 + 44 + 8 + 5)/1000 = 10.4%
now, rf2 is higher
so it was probably a statistical fluke

but something strange - the sex ratios are rather skewed
and reciprocally skewed in  reciprocal classes...
shouldn't be linked (this is strictly autosomal)

also the total is not 1000
fixed bug in cage
	it was counting the first member of each phenotype twice...
try again
now getting 1000 organisms always

but still getting sex ratios that are almost 2:1
but not always...

maybe its a Random thing
put random in the constructor of ChromosomeModel
rather than making a new one each time you call getOffspring or getRandomOrg
looks better

green bent 5/pur short two
10% rf b/w each

NR
Green-Antenna/Bent-Body/Five-Leg: 394, 218 males, 176 females
Purple-Antenna/Short-Body/Two-Leg: 409, 218 males, 191 females

single at 1st
Green-Antenna/Short-Body/Two-Leg: 41, 27 males, 14 females
Purple-Antenna/Bent-Body/Five-Leg: 51, 26 males, 25 females

single in 2nd
Green-Antenna/Bent-Body/Two-Leg: 48, 24 males, 24 females
Purple-Antenna/Short-Body/Five-Leg: 45, 20 males, 25 females

double
Purple-Antenna/Bent-Body/Two-Leg: 8, 4 males, 4 females
Green-Antenna/Short-Body/Five-Leg: 4, 2 males, 2 females

looks much better

now try diff rfs
10% then 20%

brn brn blk/blk blk red

NR
Brown-Leg/Brown-Body/Black-Eye: 353, 180 males, 173 females
Black-Leg/Black-Body/Red-Eye: 391, 196 males, 195 females

single at 1
Brown-Leg/Black-Body/Red-Eye: 37, 16 males, 21 females
Black-Leg/Brown-Body/Black-Eye: 39, 19 males, 20 females

single at 2
Brown-Leg/Brown-Body/Red-Eye: 92, 40 males, 52 females
Black-Leg/Black-Body/Black-Eye: 67, 37 males, 30 females

double
Brown-Leg/Black-Body/Black-Eye: 12, 5 males, 7 females
Black-Leg/Brown-Body/Red-Eye: 9, 7 males, 2 females

rf1 (should be 10%) = (37 + 39 + 12 + 9)/1000 = 9.7%
rf2 (should be 20%) = (92 + 67 + 12 + 9)/1000 = 18.0%
double (should be 2%) = (12 + 9)/1000 = 2.1%
yahoo!


6/9/08
started linking to VGL
made package VGL & put all VGL stuff there
put in /Resources
went to http://www.jdom.org/ to get jdom 1.1.tar.gz
	exploded on desktop
	cd Desktop/jdom1.1
	setenv JAVA_HOME /usr/
	./build.sh
	- it made build/jdom.jar
	- put that in VGLII
	- in VGLII properties, add Jar 
		select jdom.jar
	Now AOK!

start the migration
1) nuke all model stuff in VGL

2) in GM.organism, add stuff from VGL.organism
	- id, cageId, constructors

3) nuke VGL.organism and make VGL's refs refer to GM.organism
	- makes many bugs
		go thru & delete all stuff for reading/saving to/from files
			(didn't finish this..)

4) do same with VGL.OList and GM.OrganismList
	- add get() and find()
	
5) nuke VGL.Traits, VGL.Configuration

6) go back and finish removing the load/save stuff (for now)
   & fix bugs as you find them to make it work

nuke VGL.Genetics

6/10/08
- go thru and change all the m_fred to fred
- re-worked CageUI for new stuff
- also put in the gpl header to all classes
- reworked VGLII (nuked VGLMain and VGLMainApp)

6/12/08
- got it working in jar with pix and text only in dialogs (no pix yet)
- nuked useless phenotype pix

the jdom stuff failed as a jar...
made lib/ 
	put in stuff from VGL/lib
	in properties, add Class Folder
	edited build.xml to include lib
	- now OK

it can read in simple files!

Format: all are floats between 0 and 1 (if not specified, they default to 0)

minimal file:
<?xml version="1.0" encoding="UTF-8"?>
<root>
	<ZZ_ZW>0.0</ZZ_ZW>
</root>

- first, set the overall sex determining mechanism
   even if not sex-linked
   
	* ZZ_ZW - chance of ZZ/ZW sex linkage

- then the first gene - there must be at least one
	* Gene1_SexLinked - chance that it'll be sex-linked
							(if not, it'll be autosomal)
	* Gene1_3Alleles - 	chance it's 3-alleles
							(if not, it'll be 2 allele)
	* Gene1_IncDom  - 	chance it's inc dom
							(if not and 2 allele - simple dom)
							(if not and 2 allele 50/50
								chance of hierarch/circ dom)
								
- second gene - may or may not be there
	* Gene2_Present -	chance it's present
							(if not, it's a 1 gene model)
	* Gene2_SameChrAsGene1	- chance gene2 and 1 are on same chromo
								(if not, they are on different ones)
								(that is, sex vs auto)
	* Gene2_MinRfToGene1	- range of possible recombination freqs
	* Gene2_MaxRfToGene1		(between gene 1 and gene 2 if on same chromo)
	
	* Gene2_3Alleles		- same as above
	* Gene2_IncDom
	
- third and final gene - may or may not be there
	* Gene3_Present	- 	chance it's present
							(if not, it's a 2 gene model)
	* Gene3_SameChrAsGene1	- same as above
	* Gene3_MinRfToGene1
	* Gene3_MaxRfToGene1
	* Gene3_3Alleles
	* Gene3_IncDom

6/13-rw-r--r--  1 brian  admin  147 Jun 13 12:50 OneGeneAutoIncDom.prb
-rw-r--r--  1 brian  admin  147 Jun 13 12:49 OneGeneIncDom.prb
-rw-r--r--  1 brian  admin  147 Jun 13 12:50 OneGeneSLIncDom.prb
-rw-r--r--  1 brian  admin  113 Jun 13 12:45 OneGeneSimpleAutosomal.prb
-rw-r--r--  1 brian  admin  113 Jun 13 12:44 OneGeneSimpleDominance.prb
-rw-r--r--  1 brian  admin  113 Jun 13 12:45 OneGeneSimpleSexLinked.prb
-rw-r--r--  1 brian  admin  476 Jun 13 12:58 ThreeLinkedAutosomalGenes.prb
-rw-r--r--  1 brian  admin  476 Jun 13 12:59 ThreeSexLinkedGenes.prb
-rw-r--r--  1 brian  admin  292 Jun 13 12:53 TwoAutoGenesIndep.prb
-rw-r--r--  1 brian  admin  292 Jun 13 12:54 TwoAutoGenesLinked.prb
-rw-r--r--  1 brian  admin  292 Jun 13 12:55 TwoGenesMixed.prb

sent to Peter Russell (yeast@reed.edu) & Harry Roy (royh@rpi.edu)
for testing and feedback

Harry's new problem opens in his home dir - not in Problems...

got beginner mode working

added parameter BeginnerMode (True/False)

6/16/08
- working on beginner mode:
	- have balloon help always appear in beginnerMode and show only genotype
		never show phenotype and never in non beginnerMode

- added parameters MinOffspring; MaxOffspring

renamed params
	* Gene3_MinRfToGene1 - Gene3_MinRfToPrevGene
	* Gene3_MaxRfToGene1 - Gene3_MaxRfToPrevGene
since it's linkage to either gene 2 (of 1 and 2 are linked) or to 1 (if 1 and 2 aren't)

working on summary chart
- need a way to show that a cage has been added to the selected set of cages
	for summarizing
- shift-click toggles this addition
- this is indicated by a change in background color

6/17/08
set it so that the traits are listed in random order when shown in CageUI

working on summary chart
- got it working!

6/18/08
misc fixes
- add unselect all to utilities menu
- in beginner mode "Show Genetic Model" (not "show model & genotypes")
- use scrambled phenotype order for phenotype string
	that way, it will sort properly in the CageUI
- have it deal properly when you try to make a summary chart with no
	selected cages
- tested three allele models
	needed to fix ThreeAlleleIncDom
- made all models print their descriptions nicely
- got print to file and print to printer working
- started working on save work to file

6/19/08
- more work on saving to file

6/23/08
- got saving and opening work files to work!

6/24/08
fixes as per e-mail from Peter Russell yeast@reed.edu
Hi Brian
    I've now had a chance to look at your beta version and think it has great promise.  
    It certainly seemed to have the same feels as GCK as one worked through a problem.   
I tried a couple of the multiple gene problems - 2 genes linked and 3 genes linked and 
can offer some comments, all of which are basically details rather than fundamental:

(1) I assume in the final, problems will be coded as in VGL1 so that the genetics 
involved is not presented?  It would also be handy, although not essential, if 
the Problems shown as options could be selected by the instructor.

(2) Problems generated phenotypes that were presented as "Normal".  If I remember 
correctly, GCK avoided that explicitly so that students would not immediately 
assume that Normal is the wild-type trait.   I suggest not using Normal as a 
phenotype but following the GCK model.  

(3) In some Problems that popped up, the same specific phenotype appeared for two 
different traits - in a specific case, Black was a phenotype for two traits in a 
three-gene mapping problem.  Obviously that is going to be confusing to students, 
or at least a complication for assigning gene symbols or discussing the problem in 
classroom presentations.  Again, I hadn't seen that happen in GCK, but encourage 
finding a way to avoiding it.

(4) The most serious issue I saw, and it is also the case with VGL1, is that 
there are not enough flies generated at times and seemingly there is no way
 to set that as a Preference.  If I recall correctly, GCK out of the blocks
  had the same issue, so we set the preferences for higher offspring populations.   
  This is particularly important for the mapping problems where we are trying to 
  instill an appreciation of statistics and accuracy, but I also see the low 
  numbers as a limitation in some of the simpler problems where in some cases 
  just a few flies appeared, and not always in both sexes, in the starting cage.  
  The latter issue adds a complication for making true-breeding populations, for 
  instance, which we'd prefer to avoid in our mixed majors-nonmajors intro bio course.

(5) In both VGL2 and 1, there is a typo in the menus -- Utilities is misspelt.

(6) On your http://intro.bio.umb.edu/vgl/ page:
    -  in the second paragraph "compatible" is misspelt. 
    - in the third paragraph, I assume "autonomic" should be "autosomal"


(I numbered them)

(1) I'll let them change the problem file names
(2) change "normal" shape to "forked"
(5) fixed
(4) had already added min and max offspring parameters; set them higher in 3-gene
    problems
(3) 2 things:
   - add a new BristleTrait to allow more options
   - set up CharSpecBank and CharSpec to prevent two color traits (etc)
   		once a colortrait is chosen, all colortraits are removed from
   		the other lists

- fixed bug in CageUI - if more than 40 offspring, it'd blow up
	it was hard-coded to 2 rows of 20
	so fixed it to 2 rows of (most possible offspring of 1 pheno)/2
	
- this may lead to trouble with lots of offspring (very long cages!)
	therefore, cap min and max offspring at 100. (do in ProblemTypeSpecification)
	
- set it to save work as zip files so that they can't cheat by looking ar work file
   to see model
   
Revised parameters
- first, set the overall sex determining mechanism
   even if not sex-linked
	* ZZ_ZW - chance of ZZ/ZW sex linkage

- then some overall issues
	* BeginnerMode - True or False - allows users to see the genetic model
					by clicking on button in field pop cage
					and see genotypes of organisms (tool tip text)
	
	* MinOffspring - minimum number produced in each cage (capped at 100)
					- actual number is randomly distributed between these
	* MaxOffspring - maximum number produced in cage (capped at 100)

- then the first gene - there must be at least one
	* Gene1_SexLinked - chance that it'll be sex-linked
							(if not, it'll be autosomal)
	* Gene1_3Alleles - 	chance it's 3-alleles
							(if not, it'll be 2 allele)
	* Gene1_IncDom  - 	chance it's inc dom
							(if not and 2 allele - simple dom)
							(if not and 2 allele 50/50
								chance of hierarch/circ dom)
								
- second gene - may or may not be there
	* Gene2_Present -	chance it's present
							(if not, it's a 1 gene model)
	* Gene2_SameChrAsGene1	- chance gene2 and 1 are on same chromo
								(if not, they are on different ones)
								(that is, sex vs auto)
	* Gene2_MinRfToGene1	- range of possible recombination freqs
	* Gene2_MaxRfToGene1		(between gene 1 and gene 2 if on same chromo)
	
	* Gene2_3Alleles		- same as above
	* Gene2_IncDom
	
- third and final gene - may or may not be there
	* Gene3_Present	- 	chance it's present
							(if not, it's a 2 gene model)
	* Gene3_SameChrAsGene1	- same as above
	* Gene3_MinRfToGene1
	* Gene3_MaxRfToGene1
	* Gene3_3Alleles
	* Gene3_IncDom

- fixed up help so it matches new software

- VERSION 1.0!!!

6/25/08
misc fixes
- change .prb to .pr2 and .wrk to .wr2
	so there's no confusion with original VGL
- put <BeginnerMode>False</BeginnerMode> in all problem files

setting up to have it work by double-clicking work and problem files to launch VGLII
- had it deal with command-line arguments of filename

renamed problem files LevelXXp.pr2 = LevelXX.pr2 with practice mode enabled

- Level01.pr2 = One Autosomal Gene; 2 Alleles, Simple Dominance 
- Level02.pr2 = One Autosomal Gene; 2 Alleles, Incomplete Dominance
- Level03.pr2 = One XX/XY Sex-linked Gene; 2 Alleles, Simple Dominance
- Level04.pr2 = One XX/XY Sex-linked Gene; 2 Alleles, Incomplete Dominance
- Level05.pr2 = One Gene (Autosomal or XX/XY Sex-Linked); 2 Alleles, Simple Dominance
- Level06.pr2 = One Gene (Autosomal or XX/XY Sex-Linked); 2 Alleles, Incomplete Dominance
- Level07.pr2 = One Gene (Autosomal or XX/XY Sex-Linked); 3 Alleles 
								(Incomplete, Hierarchical, or Circular dominance)
- Level08.pr2 = One Gene (Autosomal, XX/XY Sex-Linked, ZZ/ZW Sex-Linked);
				(2 or 3 Alleles); (Incomplete, Hierarchical, or Circular dominance)

- Level09.pr2 = Two Unlinked Autosomal Genes; 2 Alleles each; Simple Dominance
- Level10.pr2 = Two Linked Autosomal Genes (0.1 < rf < 0.3); 2 Alleles each;
					Simple Dominance
- Level11.pr2 = Two Genes, either XX/XY Sex-Linked or Autosomal; 2 Alleles each; 
					Simple dominance

- Level12.pr2 = Three Linked Autosomal Genes (0.1 < rf < 0.3); 2 Alleles each;
					Simple dominance
- Level13.pr2 = Three Sex-Linked Genes (0.1 < rf < 0.3); 2 Alleles each;
					Simple dominance

6/26/08
- set save/open work and print to file to go to Desktop
- set it to show warning dialog if you try to open a bad file

6/27/08
fixing bugs
- summary chart persists even after you close the work
	*close work and new problem should clear it out and nuke the ui
		- add to VGLII's cleanUp() method

- if you close problem, select "save" and then cancel in the file dialog
	you lose your work
	* change cleanUp() to return

- try to make the .pr2 files zipped for security
	zip Test Level01.pr2
	mv Test.zip Test.pr2
	- recode reader
	WORKS!
	
	need to cleverly zip all files individually and rename
	first, right-click each file in finder & make archive
	then delete the originals
	then trim the extension:
	ls *.zip | sed 's/\(.*\)\.zip/  & \1/' | xargs -L1 mv

Version 1.0.1

6/29/08
started making pheno images
put boolean in cageUI to show/not-show these as they are being developed
set to false for release versions until all ready

6/30 & 7/1 
working on drawing pix

7/2/08
nuked the Bristle trait - too hard to draw
added in Wing as a body part (it had been there but not added to CharSpecbank)
- now saves Wing problems properly

- reset ImageMaker's defaults on new and open problem

got it all working!

version 1.1.0

9/26/08
had screwed up cvs so that it lost jdom
	messed it up when making PhylogenySurvey

fixed it

request for new problem file: emhowe@assumption.edu

With GCK, what I like about the program is that it allows me to create dihybrid problems 
(i.e. two traits that are unlinked or linked, depending on my intention). I also like the 
flexibility of having the dihybrid problems randomized. For example, I have it set up so 
that when a student starts a dihybrid problem, he/she is presented with two traits and the 
respective phenotypes given for each of the traits. They have to solve each trait independently 
(if they are ostensibly unlinked), and the way in which the problem is set up could have either 
of the two traits randomly start as a simple dominant model, a codominant model or a 
sex-linkage model. This system allows for students to have to figure out which model is 
appropriate for solving each trait. Of course, students also must determine how genotypes 
match to phenotypes for each trait, depending on the model they propose.

made Level11-1.pr2 - same as level 11 except 50/50 chance of inc dom for each gene


10/25/08
weird bug from Harry Roy
get cages with only males!
this is reproducible - re-crossing parents gives all males
also crossing these males with random females gives only males!

  <GeneticModel XX_XYSexDetermination="false" 
  	BeginnerMode="false" 
  	NumberOfCharacters="3" 
  	MinOffspring="40" 
  	MaxOffspring="70">

in saved file, cage 105 (id = 104) has these:
        <Organism Id="0" CageId="104" Male="true">
          <Chromosome Id="MaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="2" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="PaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="1" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="MaternalSexChromosome" Size="0" />
          <Chromosome Id="PaternalSexChromosome" Size="0" />
        </Organism>
        
- this should've been an xx/xy sex-linked system
the first organisms are sexed that way:

        <Organism Id="23" CageId="0" Male="true">
          <Chromosome Id="MaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="1" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="PaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="1" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="MaternalSexChromosome" Size="-1" />
          <Chromosome Id="PaternalSexChromosome" Size="0" />
        </Organism>
        
        <Organism Id="21" CageId="0" Male="false">
          <Chromosome Id="MaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="1" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="PaternalAutosome" Size="3">
            <Allele GeneIndex="0" TraitNumber="1" />
            <Allele GeneIndex="1" TraitNumber="1" />
            <Allele GeneIndex="2" TraitNumber="1" />
          </Chromosome>
          <Chromosome Id="MaternalSexChromosome" Size="0" />
          <Chromosome Id="PaternalSexChromosome" Size="0" />
        </Organism>

somehow, it got switched - maybe it's in how the work is saved & re-loaded
sometimes I use Boolean.parseBoolean(e.getAttributeValue())
sometimes I use e.getAttribute().getBooleanValue()
maybe its a strange thing there...

this may be it: in GeneticModel, I save the sex linkage type as 'XX_XYSexDetermination'
but, in WorkFileProcessor, I look for 'XX_XYSexLinkage'
and, if I use 
	e.getAttribute("XX_XYSexLinkage").getBooleanValue());
	this throws an error
	but the code I used:
		Boolean.parseBoolean(e.getAttributeValue("XX_XYSexLinkage"))
		does not 
		
so, if you save, reopen, and save again, it should mess up the sex-linkage
test:
open a level 11 problem (no way to be zz/zw)
save
	first line:
	  <GeneticModel XX_XYSexDetermination="true" 
	  BeginnerMode="false" 
	  NumberOfCharacters="2" 
	  MinOffspring="25" MaxOffspring="35">
	
reopen and save again
	first line
	  <GeneticModel XX_XYSexDetermination="false"  - NOTE NOW FALSE!!! THIS IS THE BUG!
	  BeginnerMode="false" 
	  NumberOfCharacters="2" 
	  MinOffspring="25" MaxOffspring="35">
	
fix work file processor to look for 'XX_XYSexDetermination'
test
open level 11 problem
cross once
save
	<GeneticModel XX_XYSexDetermination="true"
reopen
cross again
save
	<GeneticModel XX_XYSexDetermination="true"

it must be that Boolean.parseBoolean(e.getAttributeValue("XX_XYSexDetermination"))
	gives "false" when getAttributValue() returns null
therefore, use the safer version e.getAttribute().getBooleanValue()

now AOK!

another bug - RFs in Level12 are always identical
fixed code in WorkFileProcessor.processChromosomeModelInfo
	it was reading in and losing all but the last RF

check to be sure all work file param names match in save, read, and the file
order: GeneticModel.save(); WorkFileProcessor.processSavedModelInfo(); work.txt
- GeneticModel; GeneticModel; GeneticModel {OK}
- XX_XYSexDetermination; XX_XYSexDetermination; XX_XYSexDetermination {OK}
- BeginnerMode; BeginnerMode; BeginnerMode {OK}
- NumberOfCharacters; NumberOfCharacters; NumberOfCharacters {OK}
- MinOffspring; MinOffspring; MinOffspring {OK}
- MaxOffspring; MaxOffspring; MaxOffspring {OK}
- CharacterOrderScrambler; CharacterOrderScrambler; CharacterOrderScrambler {OK}
- Character; - not tested -; Character {OK}
- Index; Index; Index {OK}
- ChromosomeModel; ChromosomeModel; ChromosomeModel {OK}
- SexChromosome; SexChromosome; SexChromosome {OK}
- NumGenes; - not read -; NumGenes {OK}
- checked GeneModels to be sure they save the right name string {OK}
- RfToPrevious; RfToPrevious; RfToPrevious {OK}

all should be OK now

made version 1.1.1

4/21/09
Bug - summary chart buttons do not always respond to clicks by changing the table!
- it is throwing 
     [java] Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2
     [java] 	at GeneticModels.OrganismList.getCustomPhenotypeString(OrganismList.java:137)
     [java] 	at VGL.SummaryChartManager.calculateTotals(SummaryChartManager.java:103)
the code there is crazy - it's doing the lookup backwards:
					phenos.get(
							traitsToCount[scrambledTraitOrder[i]])
should be get(scrambledTraitOrder[traitsToCount[i]])
	fixed in 2 places in this method
changed but still not right - no more error but
	- counts are right and labels in table of counts match
	- checkbox labels in right order and they change the table but
		- the labels don't correspond to the traits they select!

changed OList - look up not by scrambled since it's the trait's index we want
	- also, need to output trait names in scrambled order
	fixed SummaryChartManager & SummaryChartUI
- seems to work

4/22/09
bug - on pc, double-clicking a Cage does not make it turn yellow...
	although it is selected (you just can't tell).

can't get the background color to change on the pc
so just change to a colored border to show selection

4/30/09
added VGL team info to the About dialog

added in code for new phenotype images
edited it for style and removed print statements
version 1.2.0

9/2/09
starting to internationalize - externalized strings from VGLII class as a test

9/9/09
make separate help directories for different languages
access them with a line in the VGL/messages.properties VGLII.HelpFileDir=Help  (or Help_fr) etc.
html files must be UTF-8 format for the accented characters to work

9/15/09
the .properties files must have unix line breaks and be ISO-8559-1
got it working
also, the menus & toolbar must not be made new each time but removeAll() works

now, need to go class-by-class to get all the other UI strings
- in package VGL:
CageManager
CageUI
CustomizedFileFilter - not needed
DocumentRenderer - not needed
ExpertiseLevel - deleted class (not needed anymore!)
GeneticModelAndCageSet - not needed
GeneticsException - not needed
IndividualPanelSet - not needed
LanguageSpecifierMenuItem - not needed
MFTotCounts - not needed
OrganismUI 
PhenotypeCount - not needed
SelectionVial
ShowPhenotypeButton - not needed
SummaryChartManager
VGL

- in package Phenotypemages - don't do any here

- in package GeneticModels:
Allele - not needed (just for export)
AutosomeModel - none
Cage - just the printing ones
CharacterSpecification - none
CharacterSpecificationBank - important ones are here
Chromosome - not needed
ChromosomeModel - some for printing & describing
ColorTrait - some
ColorTraitSet - important ones
GeneModel - none
GeneticModel - only for printing
GeneticModelFactory - error messages
GeneticsException - none
NullAlleleList - none
NullSexChromosome - none
NullTrait - none
NumberTrait - some
NumberTraitSet - important ones
Organism - a few for printing
OrganismFactory - none (just for export)
OrganismList - none
Phenotype - none
ProblemTypeSpecification - none
SexChromosomeModel - none
ShapeTrait - some
ShapeTraitSet - important ones
ThreeAlleleCircularDominanceGeneModel - stuff for printing
ThreeAlleleHierarchicalDominanceGeneModel - ditto
ThreeAlleleIncompleteDominanceGeneModel - ditto
Trait - none
TraitFactory - none
TraitSet - none
TwoAlleleIncompleteDominanceGeneModel - stuff for printing
TwoAlleleSimpleDominanceGeneModel - ditto
WorkFileProcessor - none